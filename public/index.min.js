"use strict";const mapZoomLevel=15,mapCenter={lng:-121.81460576381872,lat:39.75632866893142},geofences=new Map;geofences.set("Alaska",[{lng:-149.9041557,lat:61.2190324},{lng:-149.8588371,lat:61.2187845},{lng:-149.8542023,lat:61.1877758},{lng:-149.9093056,lat:61.1876103},{lng:-149.9041557,lat:61.2190324}]),geofences.set("Chico",[{lng:-121.8198209,lat:39.7573026},{lng:-121.8141542,lat:39.7574181},{lng:-121.8140566,lat:39.7553479},{lng:-121.8198316,lat:39.7551829},{lng:-121.8198209,lat:39.7573026}]),geofences.set("Paradise",[{lng:-121.597248,lat:39.7652903},{lng:-121.5960254,lat:39.7652861},{lng:-121.5959772,lat:39.7642821},{lng:-121.5972293,lat:39.7643151},{lng:-121.597248,lat:39.7652903}]);let map;async function initMap(){getUserLocation().then(e=>{map=new google.maps.Map(document.getElementById("map"),{center:e,zoom:mapZoomLevel,mapTypeId:google.maps.MapTypeId.ROADMAP}),new google.maps.Marker({position:e,label:{text:"You are here",className:"marker-label"},map:map}),geofences.forEach(e=>{var o=getRandomColor();new google.maps.Polygon({paths:e,strokeColor:o,strokeOpacity:.8,strokeWeight:2,fillColor:o,fillOpacity:.35,map:map})})})}async function getUserLocation(){return new Promise((o,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{e={lat:e.coords.latitude,lng:e.coords.longitude};o(e)},e=>{t(e)}):t("Geolocation is not supported by this browser.")})}function getRandomColor(){let o="#";for(let e=0;e<6;e++)o+="0123456789ABCDEF"[Math.floor(16*Math.random())];return o}function isWithinGeofence(t){let n=!1;return geofences.forEach((e,o)=>{n||(console.info("checking if user is in region: "+o),n=google.maps.geometry.poly.containsLocation(t,new google.maps.Polygon({paths:e})))}),n}function handleRegisterClick(){const o=document.getElementById("success-message"),t=(o?.classList.add("hidden"),document.getElementById("error-message"));t?.classList.add("hidden"),getUserLocation().then(e=>{(isWithinGeofence(e)?o:t)?.classList.remove("hidden")}).catch(e=>{console.error("Error fetching user location:",e)})}document.getElementById("register-button")?.addEventListener("click",()=>{handleRegisterClick()}),window.initMap=initMap;